For each row and column check if 1 to n numbers exists by using a set and empty the set each time you complete the check.